---
layout: post
title: Formatting MDX as plain text
date: '2009-04-10T17:31:00.000-07:00'
author: Julian Hyde
tags:
- mondrian mdx formatting olap4j
modified_time: '2009-04-11T00:51:56.798-07:00'
blogger_id: tag:blogger.com,1999:blog-5672165237896126100.post-6537313086400326400
blogger_orig_url: https://julianhyde.blogspot.com/2009/04/formatting-mdx-as-plain-text.html
---

<div>When Mondrian tools output MDX results as text, such as in the cmdRunner  utility, we've been using the same old crappy format for years. For example, the  query</div> <pre>select<br />  crossjoin(<br />    {[Time].[1997].[Q1],  [Time].[1997].[Q2].[4]},<br />    {[Measures].[Unit Sales], [Measures].[Store  Sales]}) on 0,<br />  {[USA].[CA].[Los Angeles],<br />   [USA].[WA].[Seattle],<br />   [USA].[CA].[San Francisco]} on 1<br />FROM [Sales]</pre><div>is formatted as</div> <pre>Axis #0:<br />{}<br />Axis #1:<br />{[Time].[1997].[Q1], [Measures].[Unit  Sales]}<br />{[Time].[1997].[Q1], [Measures].[Store  Sales]}<br />{[Time].[1997].[Q2].[4], [Measures].[Unit  Sales]}<br />{[Time].[1997].[Q2].[4], [Measures].[Store Sales]}<br />Axis #2:<br />{[Store].[All Stores].[USA].[CA].[Los Angeles]}<br />{[Store].[All  Stores].[USA].[WA].[Seattle]}<br />{[Store].[All Stores].[USA].[CA].[San  Francisco]}<br />Row #0: 6,373<br />Row #0: 13,736.97<br />Row #0: 1,865<br />Row #0: 3,917.49<br />Row #1: 6,098<br />Row #1: 12,760.64<br />Row #1: 2,121<br />Row #1: 4,444.06<br />Row #2: 439<br />Row #2: 936.51<br />Row #2: 149<br />Row #2: 327.33</pre> <div>I've just <a href="http://p4web.eigenbase.org/@md=d&amp;c=6PU@12590?ac=10">checked in</a> an alternative formatter that makes the result look  more like a pivot table. The same query would come out like  this:</div><pre>                     1997       1997        1997        1997<br />                     Q1         Q1          Q2          Q2<br />                                            4           4<br />                     Unit Sales Store Sales Unit Sales Store Sales<br />=== == ============= ========== =========== ========== ===========<br />USA CA Los Angeles   6,373      13,736.97   1,865      3,917.49<br />USA WA Seattle       6,098      12,760.64   2,121      4,444.06<br />USA CA San Francisco 439        936.51      149        327.33</pre><div>Two questions:</div><div><br /></div><div>1. Should we move this code into the <a href="http://www.olap4j.org/">olap4j</a> code base? (It would seem to make sense  because it doesn't require any mondrian internals to do the job, and the  processing requires a 'grid model' similar to query models already part of  olap4j. But I don't want to 'dump' code that is not generally useful.)</div><div><br /></div><div>2. What do people feel is the ideal format for formatting MDX results as  text? As a starting point, another couple of possible formats are below.</div><div><br /></div><div><span class="Apple-style-span" style="font-weight: bold;"><span class="Apple-style-span" style="font-style: italic;">"Oracle" format</span></span></div><pre>                     1997<br />                     Q1                      Q2<br />                                            4<br />                     Unit Sales Store Sales Unit Sales Store Sales<br />=== == ============= ========== =========== ========== ===========<br />USA CA Los Angeles        6,373   13,736.97      1,865    3,917.49<br />    WA Seattle            6,098   12,760.64      2,121    4,444.06<br />    CA San Francisco        439      936.51        149      327.33</pre><div><span class="Apple-style-span" style="font-weight: bold;"><span class="Apple-style-span" style="font-style: italic;">"MySQL"  format</span></span></div><pre>|                          | 1997                                                |<br />|                          | Q1                       |  Q2                      |<br />|                          |                          | 4                        |<br />|                          | Unit Sales | Store Sales | Unit Sales | Store Sales |<br />+-----+----+---------------+------------+-------------+------------+-------------+<br />| USA | CA | Los Angeles   |      6,373 |   13,736.97 |      1,865 |   3,917.49  |<br />|     | WA | Seattle       |      6,098 |   12,760.64 |     2,121  |    4,444.06 |<br />|     | CA | San Francisco |        439 |     936.51  |        149 |      327.33 |</pre>