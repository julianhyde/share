---
layout: post
title: A first look at linq4j
date: '2012-04-23T20:47:00.000-07:00'
author: Julian Hyde
tags: 
modified_time: '2012-04-23T22:48:35.250-07:00'
blogger_id: tag:blogger.com,1999:blog-5672165237896126100.post-6779529697171172010
blogger_orig_url: https://julianhyde.blogspot.com/2012/04/first-look-at-linq4j.html
---

This is a sneak peek of an exciting new data management technology. linq4j (short for "Language-Integrated Query for Java") is inspired by <a href="http://msdn.microsoft.com/en-us/library/bb308959.aspx">Microsoft's LINQ technology</a>, previously only available on the .NET platform, and adapted for Java. (It also builds upon ideas I had in my earlier <a href="http://saffron.sourceforge.net/overview.html">Saffron project</a>.)<br /><br /> <iframe src="http://player.vimeo.com/video/40910401" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe><br/><br/> I <a href="https://github.com/julianhyde/linq4j/commit/ab31757589ed2423abe6a9454edafb5e77e69ffd">launched the linq4j project</a> less than a week ago, but already you can do select, filter, join and groupBy operations on in-memory and SQL data.<br /><br /> In this demo, I write and execute sample code against the working system, and explain the differences between the key interfaces <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html">Iterable</a>, <a href="http://www.hydromatic.net/linq4j/apidocs/net/hydromatic/linq4j/Enumerable.html">Enumerable</a>, and <a href="http://www.hydromatic.net/linq4j/apidocs/net/hydromatic/linq4j/Queryable.html">Queryable</a>.<br /><br /> For those of you who want to get a closer look at the real code, here's one of the queries shown in the demo:<br /> <blockquote><code>DatabaseProvider provider =<br />&nbsp; &nbsp; new DatabaseProvider(Helper.MYSQL_DATA_SOURCE);<br />provider.emps<br />&nbsp; &nbsp; .where(<br />&nbsp; &nbsp; &nbsp; &nbsp; new Predicate1&lt;Employee&gt;() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public boolean apply(Employee v1) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return v1.manager;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; })<br />&nbsp; &nbsp; .join(<br />&nbsp; &nbsp; &nbsp; &nbsp; provider.depts,<br />&nbsp; &nbsp; &nbsp; &nbsp; new Function1&lt;Employee, Integer&gt;() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Integer apply(Employee a0) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return a0.deptno;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; new Function1&lt;Department, Integer&gt;() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Integer apply(Department a0) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return a0.deptno;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; new Function2&lt;Employee, Department, String&gt;() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public String apply(Employee v1,<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Department v2) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return v1.name + " works in " + v2.name;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; )<br />&nbsp; &nbsp; .foreach(<br />&nbsp; &nbsp; &nbsp; &nbsp; new Function1&lt;String, Void&gt;() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Void apply(String a0) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System.out.println(a0);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return null;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; );</code></blockquote> and here is its (not yet implemented) sugared syntax:  <blockquote><code>List&lt;String&gt; strings =<br/>&nbsp; &nbsp; from emp in provider.emps,<br/>&nbsp; &nbsp; &nbsp; &nbsp; join dept in provider.depts on emp.deptno == dept.deptno<br/>&nbsp; &nbsp; where emp.manager<br/>&nbsp; &nbsp; orderBy emp.name<br/>&nbsp; &nbsp; select emp.name + " works in " + dept.name;<br/></code></blockquote> For more information, visit the <a href="https://github.com/julianhyde/linq4j">linq4j project's home page</a>.